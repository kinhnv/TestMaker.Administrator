"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[8],{7008:(T,m,s)=>{s.r(m),s.d(m,{UserModule:()=>A});var I=s(6895),g=s(529),R=s(7059),p=s(490),a=s(4006),f=s(5434),h=s(8055),u=s(9782),i=s(4650),l=s(4004);let C=(()=>{class r{constructor(e){this.httpClient=e}getRole(e){return this.httpClient.get(`api/User/Admin/Roles/${e}`).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}createRole(e){return this.httpClient.post("api/User/Admin/Roles",e).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}editRole(e){return this.httpClient.put(`api/User/Admin/Roles/${e.roleId}`,e).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}deleteRole(e){return this.httpClient.delete(`api/User/Admin/Roles/${e}`).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}getRolesAsSelectOptions(){return this.httpClient.get("api/User/Admin/Roles/SelectOptions").pipe((0,l.U)(e=>{if(200==e.code)return e.data;throw new Error(e.errors.join("; "))}))}}return r.\u0275fac=function(e){return new(e||r)(i.LFG(g.eN))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var v=s(5715);let d=(()=>{class r{constructor(e,t){this.rolesService=e,this.router=t,this.pageHelper=new u.M("/user/role"),this.formConfigForm=new a.cw({userId:new f.W(""),userName:new h.y({title:"T\xe0i kho\u1ea3n",order:1,validatorOrOpts:a.kI.required})}),this.formConfig={id:"roleForm",title:this.formConfigTitle,buttons:this.formConfigButtons,form:this.formConfigForm}}get roleId(){const e=location.href.split("?")[0].split("/");return e[e.length-1]}get formConfigTitle(){return this.pageHelper.isCreatingPage?"Th\xeam quy\u1ec1n":this.pageHelper.isDetailsPage?"Th\xf4ng tin quy\u1ec1n":"S\u1eeda quy\u1ec1n"}get formConfigButtons(){return this.pageHelper.isCreatingPage?[{title:"L\u01b0u",event:e=>{this.rolesService.createRole(this.formConfig.form.value).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.roleId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isDetailsPage?[{title:"S\u1eeda",link:{url:this.pageHelper.getEditingPage(this.roleId)}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isEditingPage?[{title:"L\u01b0u",event:e=>{this.rolesService.editRole(this.formConfig.form.value).subscribe(t=>{this.router.navigate([this.pageHelper.getDetailsPage(t.roleId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.roleId)}}]:[]}ngOnInit(){this.pageHelper.isCreatingPage||this.rolesService.getRole(this.roleId).subscribe(e=>{this.formConfig.form.setValue(e)}),this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}}return r.\u0275fac=function(e){return new(e||r)(i.Y36(C),i.Y36(p.F0))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-roles"]],decls:1,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&i._UZ(0,"app-form",0),2&e&&i.Q6J("config",t.formConfig)},dependencies:[v.U],encapsulation:2}),r})();var U=s(1627);let y=(()=>{class r{constructor(){this.pageHelper=new u.M("/user/role"),this.addSectionButton={title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}},this.tableConfig={title:"Danh s\xe1ch quy\u1ec1n",url:"api/User/Admin/Roles",buttons:[this.addSectionButton],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[roleId]")}}]}}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-roles"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&(i.TgZ(0,"app-table",0),i._UZ(1,"app-table"),i.qZA()),2&e&&i.Q6J("config",t.tableConfig)},dependencies:[U.a],encapsulation:2}),r})();var H=s(778),w=s(9836);let S=(()=>{class r{constructor(e){this.httpClient=e}getUser(e){return this.httpClient.get(`api/User/Admin/Users/${e}`).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}createUser(e){return this.httpClient.post("api/User/Admin/Users",e).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}editUser(e){return this.httpClient.put(`api/User/Admin/Users/${e.userId}`,e).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}deleteUser(e){return this.httpClient.delete(`api/User/Admin/Users/${e}`).pipe((0,l.U)(t=>{if(200==t.code)return t.data;throw new Error(t.errors.join("; "))}))}getUsersAsSelectOptions(){return this.httpClient.get("api/User/Admin/Users/SelectOptions").pipe((0,l.U)(e=>{if(200==e.code)return e.data;throw new Error(e.errors.join("; "))}))}}return r.\u0275fac=function(e){return new(e||r)(i.LFG(g.eN))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),c=(()=>{class r{constructor(e,t,n){this.rolesService=e,this.usersService=t,this.router=n,this.pageHelper=new u.M("/user/user"),this.formConfigFormRoleIdsRoleId=new H.i({options:[],order:1,title:"Quy\u1ec1n",validatorOrOpts:a.kI.required}),this.formConfigFormRoleIds=new w.G({title:"Danh s\xe1ch quy\u1ec1n",order:3,columns:{roleId:this.formConfigFormRoleIdsRoleId},validatorOrOpts:a.kI.required}),this.formConfigForm=new a.cw({userId:new f.W(""),userName:new h.y({title:"T\xe0i kho\u1ea3n",order:1,validatorOrOpts:a.kI.required}),password:new h.y({title:"M\u1eadt kh\u1ea9u",order:2,validatorOrOpts:a.kI.required}),roles:this.formConfigFormRoleIds}),this.formConfig={id:"userForm",title:this.formConfigTitle,buttons:this.formConfigButtons,form:this.formConfigForm}}get userId(){const e=location.href.split("?")[0].split("/");return e[e.length-1]}get formConfigTitle(){return this.pageHelper.isCreatingPage?"Th\xeam t\xe0i kho\u1ea3n":this.pageHelper.isDetailsPage?"Th\xf4ng tin t\xe0i kho\u1ea3n":"S\u1eeda t\xe0i kho\u1ea3n"}get formConfigButtons(){return this.pageHelper.isCreatingPage?[{title:"L\u01b0u",event:e=>{const t=this.formConfig.form.value;t.roleIds=t.roles.map(n=>n.roleId),this.usersService.createUser(t).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.userId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isDetailsPage?[{title:"S\u1eeda",link:{url:this.pageHelper.getEditingPage(this.userId)}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isEditingPage?[{title:"L\u01b0u",event:e=>{const t=this.formConfig.form.value;t.roleIds=t.roles.map(n=>n.roleId),this.usersService.editUser(t).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.userId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.userId)}}]:[]}ngOnInit(){this.pageHelper.isCreatingPage||this.usersService.getUser(this.userId).subscribe(e=>{e.roleIds.forEach(t=>{this.formConfigFormRoleIds.addFormGroup()}),this.formConfig.form.setValue({userId:e.userId,userName:e.userName,password:e.password,roles:e.roleIds.map(t=>({roleId:t}))}),this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}),this.rolesService.getRolesAsSelectOptions().subscribe(e=>{this.formConfigFormRoleIdsRoleId.params.options=e})}}return r.\u0275fac=function(e){return new(e||r)(i.Y36(C),i.Y36(S),i.Y36(p.F0))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-users"]],decls:1,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&i._UZ(0,"app-form",0),2&e&&i.Q6J("config",t.formConfig)},dependencies:[v.U],encapsulation:2}),r})();const P=[{path:"user-list",component:(()=>{class r{constructor(){this.pageHelper=new u.M("/user/user"),this.addSectionButton={title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}},this.tableConfig={title:"Danh s\xe1ch t\xe0i kho\u1ea3n",url:"api/User/Admin/Users",buttons:[this.addSectionButton],columns:[{property:"userName",title:"T\xe0i kho\u1ea3n",text:"[userName]",link:{url:this.pageHelper.getDetailsPage("[userId]")}}]}}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-roles"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&(i.TgZ(0,"app-table",0),i._UZ(1,"app-table"),i.qZA()),2&e&&i.Q6J("config",t.tableConfig)},dependencies:[U.a],encapsulation:2}),r})()},{path:"user-creating",component:c},{path:"user-details/:id",component:c},{path:"user-editing/:id",component:c},{path:"role-list",component:y},{path:"role-creating",component:d},{path:"role-details/:id",component:d},{path:"role-editing/:id",component:d}];let F=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[p.Bz.forChild(P),p.Bz]}),r})(),A=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[I.ez,F,R.u,g.JF]}),r})()}}]);