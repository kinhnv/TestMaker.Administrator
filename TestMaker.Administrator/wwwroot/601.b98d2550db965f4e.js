"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[601],{1601:(x,v,s)=>{s.r(v),s.d(v,{EventModule:()=>b});var c=s(6895),C=s(529),r=s(490),g=s(4006),m=s(778),I=s(5434),h=s(8055),l=s(9782),t=s(4650),f=s(2447),y=s(3454),p=s(3421),E=s(5715),H=s(2071),u=s(1627);let T=(()=>{class e{constructor(n){this.candidatesService=n,this.pageHelper=new l.M("/event/candidate"),this.tableConfig={title:"Danh s\xe1ch th\xed sinh",url:"api/Event/Admin/Candidates",buttons:[{title:"Th\xeam",event:i=>{this.candidatesService.createCandidate({eventId:this.eventId}).subscribe(()=>{window.location.reload()})}}],columns:[{property:"code",title:"M\xe3",text:"[code]"},{property:"answer",title:"",text:"C\xe2u tr\u1ea3 l\u1eddi",link:{url:this.pageHelper.getDetailsPage("[candidateId]")}}]}}ngOnInit(){this.eventId&&(this.tableConfig.url=`api/Event/Admin/Candidates?eventId=${this.eventId}`)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(H.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-candidates"]],inputs:{eventId:"eventId"},decls:2,vars:1,consts:[[3,"config"]],template:function(n,i){1&n&&(t.TgZ(0,"app-layout"),t._UZ(1,"app-table",0),t.qZA()),2&n&&(t.xp6(1),t.Q6J("config",i.tableConfig))},dependencies:[p.$,u.a],encapsulation:2}),e})();function S(e,a){if(1&e&&t._UZ(0,"app-candidates",2),2&e){const n=t.oxw();t.Q6J("eventId",n.eventId)}}let d=(()=>{class e{constructor(n,i,o){this.eventsService=n,this.testsService=i,this.router=o,this.pageHelper=new l.M("/event/event"),this.formType=new m.i({title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",options:[],order:2,events:{}}),this.formTestId=new m.i({title:"B\xe0i ki\u1ec3m tra",options:[],order:3,events:{}}),this.formConfig={id:"eventForm",title:this.title,buttons:[{title:"Danh s\xe1ch",link:{url:this.pageHelper.getListPage()}},this.pageHelper.isEditingPage?{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.eventId)}}:null,{title:this.pageHelper.isDetailsPage?"S\u1eeda":this.pageHelper.isEditingPage?"L\u01b0u":"Th\xeam",link:this.pageHelper.isDetailsPage?{url:this.pageHelper.getEditingPage(this.eventId)}:null,event:this.pageHelper.isDetailsPage?null:A=>{this.onSubmit(A)}}],form:new g.cw({eventId:new I.W(""),name:new h.y({title:"T\xean",order:1,validatorOrOpts:g.kI.required}),type:this.formType,testId:this.formTestId})}}get eventId(){const n=location.href.split("/");return n[n.length-1]}get title(){return this.pageHelper.isCreatingPage?"Th\xeam s\u1ef1 ki\u1ec7n":this.pageHelper.isDetailsPage?"Th\xf4ng tin s\u1ef1 ki\u1ec7n":"S\u1eeda s\u1ef1 ki\u1ec7n"}ngOnInit(){if(this.testsService.getEventTypeSelectOptions().subscribe(i=>{this.formType.params.options=i}),this.testsService.getTestsAsSelectOptions().subscribe(i=>{this.formTestId.params.options=i}),!this.pageHelper.isCreatingPage&&(this.formConfig.form.addControl("code",new h.y({title:"M\xe3",order:2})),this.eventsService.getEvent(this.eventId).subscribe(i=>{this.formConfig.form.setValue(i)}),this.pageHelper.isEditingPage)){var n=this.formConfig.form.get("code");n&&n.disable()}this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}onSubmit(n){const i=this.formConfig.form.value;this.pageHelper.isCreatingPage&&this.eventsService.createEvent({name:i.name,type:i.type,testId:i.testId}).subscribe(o=>{this.router.navigate([this.pageHelper.getDetailsPage(o.eventId)])}),this.pageHelper.isEditingPage&&this.eventsService.editEvent({eventId:i.eventId,name:i.name,type:i.type,testId:i.testId}).subscribe(()=>{this.router.navigate([this.pageHelper.getDetailsPage(i.eventId)])})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.n),t.Y36(y.$x),t.Y36(r.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-event"]],decls:3,vars:2,consts:[[3,"config"],[3,"eventId",4,"ngIf"],[3,"eventId"]],template:function(n,i){1&n&&(t.TgZ(0,"app-layout"),t._UZ(1,"app-form",0),t.YNc(2,S,1,1,"app-candidates",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("config",i.formConfig),t.xp6(1),t.Q6J("ngIf",i.pageHelper.isDetailsPage))},dependencies:[c.O5,p.$,E.U,T],encapsulation:2}),e})();const P=[{path:"event-list",component:(()=>{class e{constructor(n){this.eventsService=n,this.pageHelper=new l.M("/event/event"),this.tableConfig={title:"Danh s\xe1ch s\u1ef1 ki\u1ec7n",url:"api/Event/Admin/Events",recycleBinConfig:{enable:!0,deleteEvent:(i,o)=>(console.log(i,o),this.eventsService.deleteEvent(i.eventId))},buttons:[{title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}}],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[eventId]")}},{property:"type",title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",text:"[type]"},{property:"code",title:"M\xe3",text:"[code]"}]}}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.n))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-event"]],decls:2,vars:1,consts:[[3,"config"]],template:function(n,i){1&n&&(t.TgZ(0,"app-layout"),t._UZ(1,"app-table",0),t.qZA()),2&n&&(t.xp6(1),t.Q6J("config",i.tableConfig))},dependencies:[p.$,u.a],encapsulation:2}),e})(),data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-creating",component:d,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-details/:id",component:d,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-editing/:id",component:d,data:{title:"S\u1ef1 ki\u1ec7n"}}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.Bz.forChild(P),r.Bz]}),e})();var D=s(9368);let b=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,M,D.u,C.JF]}),e})()}}]);