"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[601],{1601:(A,d,s)=>{s.r(d),s.d(d,{EventModule:()=>b});var v=s(6895),f=s(529),o=s(490),c=s(4006),g=s(778),u=s(5434),m=s(8055),r=s(9782),n=s(4650),C=s(2447),I=s(3454),E=s(5715),y=s(2071),h=s(4272);let H=(()=>{class e{constructor(t){this.candidatesService=t,this.pageHelper=new r.M("/event/candidate"),this.tableConfig={title:"Danh s\xe1ch th\xed sinh",url:"api/Event/Admin/Candidates",buttons:[{title:"Th\xeam",event:i=>{this.candidatesService.createCandidate({eventId:this.eventId}).subscribe(()=>{window.location.reload()})}}],columns:[{property:"code",title:"M\xe3",text:"[code]"},{property:"answer",title:"",text:"C\xe2u tr\u1ea3 l\u1eddi",link:{url:this.pageHelper.getDetailsPage("[candidateId]")}}]}}ngOnInit(){this.eventId&&(this.tableConfig.url=`api/Event/Admin/Candidates?eventId=${this.eventId}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(y.ol))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-candidates"]],inputs:{eventId:"eventId"},decls:2,vars:1,consts:[[3,"config"]],template:function(t,i){1&t&&(n.TgZ(0,"app-table",0),n._UZ(1,"app-table"),n.qZA()),2&t&&n.Q6J("config",i.tableConfig)},dependencies:[h.a],encapsulation:2}),e})();function T(e,a){if(1&e&&n._UZ(0,"app-candidates",2),2&e){const t=n.oxw();n.Q6J("eventId",t.eventId)}}let l=(()=>{class e{constructor(t,i,p){this.eventsService=t,this.testsService=i,this.router=p,this.pageHelper=new r.M("/event/event"),this.formType=new g.i({title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",options:[],order:2,events:{}}),this.formTestId=new g.i({title:"B\xe0i ki\u1ec3m tra",options:[],order:3,events:{}}),this.formConfig={id:"eventForm",title:this.title,buttons:[{title:"Danh s\xe1ch",link:{url:this.pageHelper.getListPage()}},this.pageHelper.isEditingPage?{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.eventId)}}:null,{title:this.pageHelper.isDetailsPage?"S\u1eeda":this.pageHelper.isEditingPage?"L\u01b0u":"Th\xeam",link:this.pageHelper.isDetailsPage?{url:this.pageHelper.getEditingPage(this.eventId)}:null,event:this.pageHelper.isDetailsPage?null:D=>{this.onSubmit(D)}}],form:new c.cw({eventId:new u.W(""),name:new m.y({title:"T\xean",order:1,validatorOrOpts:c.kI.required}),type:this.formType,testId:this.formTestId})}}get eventId(){const t=location.href.split("/");return t[t.length-1]}get title(){return this.pageHelper.isCreatingPage?"Th\xeam s\u1ef1 ki\u1ec7n":this.pageHelper.isDetailsPage?"Th\xf4ng tin s\u1ef1 ki\u1ec7n":"S\u1eeda s\u1ef1 ki\u1ec7n"}ngOnInit(){if(this.testsService.getEventTypeSelectOptions().subscribe(i=>{this.formType.params.options=i}),this.testsService.getTestsAsSelectOptions().subscribe(i=>{this.formTestId.params.options=i}),!this.pageHelper.isCreatingPage&&(this.formConfig.form.addControl("code",new m.y({title:"M\xe3",order:2})),this.eventsService.getEvent(this.eventId).subscribe(i=>{this.formConfig.form.setValue(i),this.formType.setValue(1)}),this.pageHelper.isEditingPage)){var t=this.formConfig.form.get("code");t&&t.disable()}this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}onSubmit(t){const i=this.formConfig.form.value;this.pageHelper.isCreatingPage&&this.eventsService.createEvent({name:i.name,type:i.type,testId:i.testId}).subscribe(p=>{this.router.navigate([this.pageHelper.getDetailsPage(p.eventId)])}),this.pageHelper.isEditingPage&&this.eventsService.editEvent({eventId:i.eventId,name:i.name,type:i.type,testId:i.testId}).subscribe(()=>{this.router.navigate([this.pageHelper.getDetailsPage(i.eventId)])})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(C.nC),n.Y36(I.$x),n.Y36(o.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-event"]],decls:2,vars:2,consts:[[3,"config"],[3,"eventId",4,"ngIf"],[3,"eventId"]],template:function(t,i){1&t&&(n._UZ(0,"app-form",0),n.YNc(1,T,1,1,"app-candidates",1)),2&t&&(n.Q6J("config",i.formConfig),n.xp6(1),n.Q6J("ngIf",i.pageHelper.isDetailsPage))},dependencies:[v.O5,E.U,H],encapsulation:2}),e})();const P=[{path:"event-list",component:(()=>{class e{constructor(){this.pageHelper=new r.M("/event/event"),this.tableConfig={title:"Danh s\xe1ch s\u1ef1 ki\u1ec7n",url:"api/Event/Admin/Events",buttons:[{title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}}],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[eventId]")}},{property:"code",title:"M\xe3",text:"[code]"}]}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-event"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,i){1&t&&n._UZ(0,"app-table",0),2&t&&n.Q6J("config",i.tableConfig)},dependencies:[h.a],encapsulation:2}),e})(),data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-creating",component:l,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-details/:id",component:l,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-editing/:id",component:l,data:{title:"S\u1ef1 ki\u1ec7n"}}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[o.Bz.forChild(P),o.Bz]}),e})();var M=s(1413);let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[v.ez,S,M.u,f.JF]}),e})()}}]);