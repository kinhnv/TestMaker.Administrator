"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[601],{1601:(A,d,s)=>{s.r(d),s.d(d,{EventModule:()=>M});var v=s(6895),u=s(529),r=s(490),c=s(4006),g=s(778),C=s(5434),m=s(8055),l=s(9782),i=s(4650),h=s(2447),I=s(3454),E=s(5715),y=s(2071),f=s(1627);let H=(()=>{class e{constructor(t){this.candidatesService=t,this.pageHelper=new l.M("/event/candidate"),this.tableConfig={title:"Danh s\xe1ch th\xed sinh",url:"api/Event/Admin/Candidates",buttons:[{title:"Th\xeam",event:n=>{this.candidatesService.createCandidate({eventId:this.eventId}).subscribe(()=>{window.location.reload()})}}],columns:[{property:"code",title:"M\xe3",text:"[code]"},{property:"answer",title:"",text:"C\xe2u tr\u1ea3 l\u1eddi",link:{url:this.pageHelper.getDetailsPage("[candidateId]")}}]}}ngOnInit(){this.eventId&&(this.tableConfig.url=`api/Event/Admin/Candidates?eventId=${this.eventId}`)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(y.ol))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-candidates"]],inputs:{eventId:"eventId"},decls:2,vars:1,consts:[[3,"config"]],template:function(t,n){1&t&&(i.TgZ(0,"app-table",0),i._UZ(1,"app-table"),i.qZA()),2&t&&i.Q6J("config",n.tableConfig)},dependencies:[f.a],encapsulation:2}),e})();function S(e,a){if(1&e&&i._UZ(0,"app-candidates",2),2&e){const t=i.oxw();i.Q6J("eventId",t.eventId)}}let p=(()=>{class e{constructor(t,n,o){this.eventsService=t,this.testsService=n,this.router=o,this.pageHelper=new l.M("/event/event"),this.formType=new g.i({title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",options:[],order:2,events:{}}),this.formTestId=new g.i({title:"B\xe0i ki\u1ec3m tra",options:[],order:3,events:{}}),this.formConfig={id:"eventForm",title:this.title,buttons:[{title:"Danh s\xe1ch",link:{url:this.pageHelper.getListPage()}},this.pageHelper.isEditingPage?{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.eventId)}}:null,{title:this.pageHelper.isDetailsPage?"S\u1eeda":this.pageHelper.isEditingPage?"L\u01b0u":"Th\xeam",link:this.pageHelper.isDetailsPage?{url:this.pageHelper.getEditingPage(this.eventId)}:null,event:this.pageHelper.isDetailsPage?null:D=>{this.onSubmit(D)}}],form:new c.cw({eventId:new C.W(""),name:new m.y({title:"T\xean",order:1,validatorOrOpts:c.kI.required}),type:this.formType,testId:this.formTestId})}}get eventId(){const t=location.href.split("/");return t[t.length-1]}get title(){return this.pageHelper.isCreatingPage?"Th\xeam s\u1ef1 ki\u1ec7n":this.pageHelper.isDetailsPage?"Th\xf4ng tin s\u1ef1 ki\u1ec7n":"S\u1eeda s\u1ef1 ki\u1ec7n"}ngOnInit(){if(this.testsService.getEventTypeSelectOptions().subscribe(n=>{this.formType.params.options=n}),this.testsService.getTestsAsSelectOptions().subscribe(n=>{this.formTestId.params.options=n}),!this.pageHelper.isCreatingPage&&(this.formConfig.form.addControl("code",new m.y({title:"M\xe3",order:2})),this.eventsService.getEvent(this.eventId).subscribe(n=>{this.formConfig.form.setValue(n)}),this.pageHelper.isEditingPage)){var t=this.formConfig.form.get("code");t&&t.disable()}this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}onSubmit(t){const n=this.formConfig.form.value;this.pageHelper.isCreatingPage&&this.eventsService.createEvent({name:n.name,type:n.type,testId:n.testId}).subscribe(o=>{this.router.navigate([this.pageHelper.getDetailsPage(o.eventId)])}),this.pageHelper.isEditingPage&&this.eventsService.editEvent({eventId:n.eventId,name:n.name,type:n.type,testId:n.testId}).subscribe(()=>{this.router.navigate([this.pageHelper.getDetailsPage(n.eventId)])})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.nC),i.Y36(I.$x),i.Y36(r.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-event"]],decls:2,vars:2,consts:[[3,"config"],[3,"eventId",4,"ngIf"],[3,"eventId"]],template:function(t,n){1&t&&(i._UZ(0,"app-form",0),i.YNc(1,S,1,1,"app-candidates",1)),2&t&&(i.Q6J("config",n.formConfig),i.xp6(1),i.Q6J("ngIf",n.pageHelper.isDetailsPage))},dependencies:[v.O5,E.U,H],encapsulation:2}),e})();const T=[{path:"event-list",component:(()=>{class e{constructor(t){this.eventsService=t,this.pageHelper=new l.M("/event/event"),this.tableConfig={title:"Danh s\xe1ch s\u1ef1 ki\u1ec7n",url:"api/Event/Admin/Events",recycleBinConfig:{enable:!0,deleteEvent:(n,o)=>(console.log(n,o),this.eventsService.deleteEvent(n.eventId))},buttons:[{title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}}],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[eventId]")}},{property:"type",title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",text:"[type]"},{property:"code",title:"M\xe3",text:"[code]"}]}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.nC))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-event"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,n){1&t&&i._UZ(0,"app-table",0),2&t&&i.Q6J("config",n.tableConfig)},dependencies:[f.a],encapsulation:2}),e})(),data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-creating",component:p,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-details/:id",component:p,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-editing/:id",component:p,data:{title:"S\u1ef1 ki\u1ec7n"}}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[r.Bz.forChild(T),r.Bz]}),e})();var b=s(7059);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[v.ez,P,b.u,u.JF]}),e})()}}]);